# Howto

일관적인 관리자 CRUD 페이지를 생성 관리 합니다.
대분의 관리자 페이지는 목록->보가->생성->수정->삭제등 동작 플로우가 일정합니다. 또한, 검색기능, 선택삭제, 팝업 삭제 확인 기능등을 가지고 있습니다. 이를 공통적으로 분리하여 재사용이 가능하도록 합니다.

## 컨트롤러
컨트로러 또한 관리자 페이지는 동일한 형태를 유지하고 있습니다. 
먼저, `모듈/App/Http/Controllers/Admin/기능명` 으로 컨트롤러 폴더를 생성 합니다. 그리고 single action 스타일로 컨트롤러를 생성합니다.
> single action으로 생성하는 이유는 ai가 코드를 해석할때 코드의 용량을 줄이고, 토큰수를 줄이기 위함 입니다.

다음과 같이 컨트롤러를 생성합니다.

- Admin<가능명>.php
- Admin<가능명>Create.php
- Admin<가능명>Delete.php
- Admin<가능명>Edit.php
- Admin<가능명>Show.php

가눙애 대한 컨트롤러마다 동적으로 처리하기 위하여 컨트롤러 폴더에 json 파일을 생성하여 주입합니다.

컨트롤러에서 반환하는 view() 의 경로는 json 파일에 viewPath 로 추가되어 있습니다.

## livewire3 컴포넌트 결합
single action의 __invoke() 는 직접 로직을 구현하지 않고, blade를 호출합니다. 대부분의 로직은 일반화 하여 livewire3 컴포넌트로 구현하여 처리 합니다. 그중에서 필요한 특수한 로직들은 hook을 통하여 라이이브와이어가 컴트롤러의 특정 메소드를 호출하여 동작합니다.

컴포넌트는 json 설정을 주입받으며, json 설정값에 따라서 동적으로 동작을 처리 합니다.

livewire3 도 화면 blade를 반환해야 하는데, json에서 이 경로로 같이 추가하여, 이를 통하여 결과를 반환 하면 좋을듯 합니다.

## 목록 출력
목록 페이지는 2개의 라이브와이어 컴포넌트를 가지고 있습니다. 하나는 검색역할을 수행하며, 두번재믄 목록을 출력 합니다. 검색과 목록은 이벤트 호출방식으로 연결이 되어 있습니다.

테이몰 목록에는 "전체선택", "개발선택" 체크박스를 가지고 있습니다. 이를 통하여 bulk 삭제 기능을 처리합니다.

또한 각가 tr에는 삭제 링크가 존재합니다. 별도로 삭제기능을 담당하고 있는 livewire3 컴포넌트를 가지고 있으며, 이벤트 호출방식으로 통신을 처리합니다. 삭제는 레이어 팝업 형태로 출력되며, 10자리의 난수값이 표시가 되고, 입력창에 난수값이 정상으로 일치하게 입력이 되면 삭제 버튼이 활성화가 됩니다. 이는 실수로 데이터를 삭제하는 것을 방지하기 위해서 입니다. 도한 매번 복사해서 입력하기 어렵기 대문에 이를 자동화 해주는 복사 버튼을 제공합니다. 난수값을 복사하여, 입력창에 넣어 주게 됩니다.

목록은 컬럼별로 정려을 선택할 수 있습니다.

- 목록 출력과 검색을 하는 AdminTable 과 AdminSearch 컴포넌트는 모든 관리자 CRUD에서 공통으로 사용하는 기능입니다. 특정 개별동작은 컨트롤러의 Hook 을 이용하여 선언을 하는 구조로 합니다.

## 생성 폼
새로운 추가를 누르면 ~/create 페이지로 이동을 합니다. 새로운 데이터를 추가할 수 있습니다. 이과정에서 필요시 컨트로롤러의 hook을 호출할 수 있습니다.

설정 json 값도 같이 전송됩니다.

설정입력폼은 livewire3 컴포넌트로 처리합니다. 정상적인 저장이 완료과 되면 자동으로 목록페이지로 이동합니다. 이대, ~/create 히스토리 목록은 정리해 주어야 합니다. 이는 다시 back 버튼으로 이동을 하지 못하게 하기 위해서 입니다.

json애 `formPath` 경로를 추갛여 livewire3 의 blade 에서 include 합니다.

- 생성 AdminCreate 컴포넌트는 모든 관리자 CRUD에서 공통으로 사용하는 기능입니다. 특정 개별동작은 컨트롤러의 Hook 을 이용하여 선언을 하는 구조로 합니다.

## 수정 폼
~/{id}/edit 로 이동하면 데이터를 수정할 수 있습니다. 수정폼도 livewire3 컴포넌트를 통하여 처리 합니다.

json애 `formPath` 경로를 추갛여 livewire3 의 blade 에서 include 합니다.

- 수정 AdminㄸEdit 컴포넌트는 모든 관리자 CRUD에서 공통으로 사용하는 기능입니다. 특정 개별동작은 컨트롤러의 Hook 을 이용하여 선언을 하는 구조로 합니다.

## 상세보기
~/{id} 로 접근하면 상세 보기를 확인할 수 있습니다.

- 보기 AdminShow 컴포넌트는 모든 관리자 CRUD에서 공통으로 사용하는 기능입니다. 특정 개별동작은 컨트롤러의 Hook 을 이용하여 선언을 하는 구조로 합니다.

## 삭제
팝업 레이어 삭제를 담당하는 livewire3 컴포넌트 입니다.


- 삭제 AdminDelete 컴포넌트는 모든 관리자 CRUD에서 공통으로 사용하는 기능입니다. 특정 개별동작은 컨트롤러의 Hook 을 이용하여 선언을 하는 구조로 합니다.


